"use strict";var Ot=Object.defineProperty;var s=(e,t)=>Ot(e,"name",{value:t,configurable:!0});var l=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var F=l((Ur,ce)=>{"use strict";ce.exports={createSchema:"CREATE SCHEMA ${schemaName}${authorization}${dataCapture};",createTable:"CREATE${tableType} TABLE${ifNotExists} ${name}${tableProps}${tableOptions};",createAuxiliaryTable:"CREATE${tableType} TABLE ${name}${tableOptions};",comment:"\nCOMMENT ON ${objectType} ${objectName} IS ${comment};\n",createTableProps:"${columns}${keyConstraints}${checkConstraints}${foreignKeyConstraints}",columnDefinition:"${name}${type}${default}${constraints}",createForeignKey:"ALTER TABLE ${foreignTable} ADD CONSTRAINT ${name} FOREIGN KEY (${foreignKey}) REFERENCES ${primaryTable} (${primaryKey})${onDelete};",createForeignKeyConstraint:"${name} FOREIGN KEY (${foreignKey}) REFERENCES ${primaryTable} (${primaryKey})${onDelete}",checkConstraint:"${name}CHECK (${expression})",createKeyConstraint:"${constraintName}${keyType}${columns}${options}",createView:"CREATE${orReplace} VIEW ${name} ${viewProperties}\n	AS ${selectStatement};",viewSelectStatement:"SELECT ${keys}\n	FROM ${tableName}",createIndex:"CREATE${indexType} INDEX${indexName} ON ${indexTableName}${indexOptions};\n"}});var le=l((Hr,me)=>{"use strict";me.exports={number:"NUMBER",string:"VARCHAR",date:"DATE",timestamp:"TIMESTAMP",binary:"BINARY",boolean:"BOOLEAN",document:"JSONB",array:"ARRAY",objectId:"VARCHAR(24)",default:"CHAR"}});var pe=l((Mr,ue)=>{"use strict";ue.exports={SMALLINT:{capacity:2},INT:{capacity:4},INTEGER:{capacity:4},BIGINT:{capacity:8},DECIMAL:{mode:"decimal"},DEC:{mode:"decimal"},NUMERIC:{mode:"decimal"},FLOAT:{capacity:4,mode:"float"},"DOUBLE PRECISION":{capacity:8,mode:"float"},REAL:{capacity:8,mode:"float"},NUMBER:{mode:"number"},CHAR:{mode:"char"},CHARACTER:{mode:"char"},VARCHAR:{mode:"varchar"},"CHAR VARYING":{mode:"varchar"},"CHARACTER VARYING":{mode:"varchar"},"LONG VARCHAR":{mode:"long varchar"},GRAPHIC:{mode:"graphic"},VARGRAPHIC:{mode:"vargraphic"},CLOB:{mode:"clob"},"CHARACTER LARGE OBJECT":{mode:"clob"},BINARY:{mode:"binary"},VARVIBINARY:{mode:"varbinary"},BLOB:{mode:"blob"},DATE:{format:"YYYY-MM-DD"},TIME:{format:"hh:mm:ss"},TIMESTAMP:{format:"YYYY-MM-DD hh:mm:ss"},JSON:{},XML:{}}});var A=l((Vr,Ae)=>{"use strict";var{toLower:ye}=require("lodash"),Pt=s(({text:e,tab:t="	"})=>e.split(`
`).map(a=>t+a).join(`
`),"setTab"),qt=s(({descriptors:e,type:t})=>Object.keys(e).map(ye).includes(ye(t)),"hasType"),w=s(({key:e})=>e?.isActivated??!0,"checkIsKeyActivated"),Dt=s(({keys:e})=>e.length?e.every(t=>!w({key:t})):!1,"checkAllKeysDeactivated"),de=s(({items:e,mapFunction:t})=>{let a=e.filter(r=>w({key:r})).map(t),n=e.filter(r=>!w({key:r})).map(t);return{activatedItems:a,deactivatedItems:n}},"divideIntoActivatedAndDeactivated"),Te=s((e,{isActivated:t,isPartOfLine:a,inlineComment:n="--"})=>t!==!1?e:a?"/* "+e+" */":e.includes(`
`)?`/*
`+e+` */
`:n+" "+e,"commentIfDeactivated"),k=s(({name:e})=>`"${e}"`,"wrapInQuotes"),Lt=s(({name:e})=>`'${e}'`,"wrapInSingleQuotes"),Bt=s(({name:e,schemaName:t})=>t?`${k({name:t})}.${k({name:e})}`:k({name:e}),"getNamePrefixedWithSchemaName"),kt=s(({name:e})=>k({name:e}),"columnMapToString"),Yt=s((e,t,a,n=kt)=>{let r=de({items:e,mapFunction:n}),i=r?.deactivatedItems?.length?Te(r.deactivatedItems.join(", "),{isActivated:!1,isPartOfLine:!0}):"";return!t&&a?" ("+r.activatedItems.join(", ")+i+")":" ("+e.map(n).join(", ")+")"},"getColumnsList"),Ut=s(({value:e})=>Array.isArray(e)?e:[e],"toArray");Ae.exports={setTab:Pt,hasType:qt,checkAllKeysDeactivated:Dt,checkIsKeyActivated:w,divideIntoActivatedAndDeactivated:de,commentIfDeactivated:Te,wrapInQuotes:k,wrapInSingleQuotes:Lt,getNamePrefixedWithSchemaName:Bt,getColumnsList:Yt,toArray:Ut}});var W=l((Gr,Ne)=>{"use strict";var ge=s((e="")=>new RegExp("\\$\\{(.*?)\\}",e),"template"),Ht=s(e=>e.match(ge("gi"))||[],"getAllTemplates"),Mt=s(e=>(e.match(ge("i"))||[])[1],"parseTemplate"),Vt=s(({template:e,templateData:t})=>Ht(e).reduce((a,n)=>{let r=Mt(n);return a.replace(n,()=>t[r]||t[r]===0?t[r]:"")},e),"assignTemplates");Ne.exports={assignTemplates:Vt}});var ve=l((wr,$e)=>{"use strict";var{omitBy:_t,isNil:Gt,isEmpty:Ce,trim:Y}=require("lodash"),{wrapInQuotes:Ie,commentIfDeactivated:Ft,checkIsKeyActivated:be}=A(),Q={primaryKey:"PRIMARY KEY",unique:"UNIQUE"},fe=s((e,t)=>Object.entries(e.properties).map(t),"mapProperties"),Ee=s(({column:e})=>!e.compositeUniqueKey&&e.unique,"isUniqueKey"),Se=s(({column:e})=>Ee({column:e})&&!Y(e.uniqueKeyOptions?.constraintName),"isInlineUnique"),he=s(({column:e})=>!e.compositeUniqueKey&&!e.compositePrimaryKey&&e.primaryKey,"isPrimaryKey"),xe=s(({column:e})=>he({column:e})&&!Y(e.primaryKeyOptions?.constraintName),"isInlinePrimaryKey"),Z=s(({columnName:e,isActivated:t,options:a,keyType:n})=>({keyType:n,columns:[{name:e,isActivated:t}],..._t(a,Gt)}),"hydrateKeyOptions"),wt=s(({keyId:e,properties:t})=>Object.keys(t).find(a=>t[a].GUID===e),"findName"),Wt=s(({keyId:e,properties:t})=>Object.values(t).find(n=>n.GUID===e)?.isActivated??!0,"checkIfActivated"),Ke=s(({jsonSchema:e,keys:t=[]})=>t.map(a=>{let n=wt({keyId:a.keyId,properties:e.properties}),r=Wt({keyId:a.keyId,properties:e.properties});return{name:n,isActivated:r}}),"getKeys"),Qt=s(({jsonSchema:e})=>Array.isArray(e.primaryKey)?e.primaryKey.filter(t=>!Ce(t.compositePrimaryKey)).map(t=>({...Z({options:t,keyType:Q.primaryKey}),columns:Ke({keys:t.compositePrimaryKey,jsonSchema:e})})):[],"getCompositePrimaryKeys"),Zt=s(({jsonSchema:e})=>Array.isArray(e.uniqueKey)?e.uniqueKey.filter(t=>!Ce(t.compositeUniqueKey)).map(t=>({...Z({options:t,keyType:Q.unique}),columns:Ke({keys:t.compositeUniqueKey,jsonSchema:e})})):[],"getCompositeUniqueKeys"),Xt=s(({jsonSchema:e})=>{if(!e.properties)return[];let t=fe(e,([n,r])=>{if(!(!Ee({column:r})||Se({column:r})))return Z({columnName:n,isActivated:r.isActivated,options:r.uniqueKeyOptions,keyType:Q.unique})}).filter(Boolean);return[...fe(e,([n,r])=>{if(!(!he({column:r})||xe({column:r})))return Z({columnName:n,isActivated:r.isActivated,options:r.primaryKeyOptions,keyType:Q.primaryKey})}).filter(Boolean),...Qt({jsonSchema:e}),...t,...Zt({jsonSchema:e})]},"getTableKeyConstraints"),Jt=s(({keys:e})=>{if(Array.isArray(e)){let t=e.filter(r=>be({key:r})).map(r=>Ie({name:Y(r.name)})),a=e.filter(r=>!be({key:r})).map(r=>Ie({name:Y(r.name)})),n=a.length?Ft(a,{isActivated:!1,isPartOfLine:!0}):"";return t.join(", ")+n}return e},"foreignKeysToString"),zt=s(({keys:e})=>e.map(t=>Y(t.name)).join(", "),"foreignActiveKeysToString"),jt=s(({customProperties:e={}})=>{let{relationshipOnDelete:t,relationshipOnUpdate:a}=e,n=t?" ON DELETE "+t:"",r=a?" ON UPDATE "+a:"";return n+r},"customPropertiesForForeignKey");$e.exports={getTableKeyConstraints:Xt,isInlineUnique:Se,isInlinePrimaryKey:xe,foreignKeysToString:Jt,foreignActiveKeysToString:zt,customPropertiesForForeignKey:jt}});var z=l((Qr,Re)=>{"use strict";var c={char:"CHAR",varchar:"VARCHAR",nchar:"NCHAR",nvarchar:"NVARCHAR",clob:"CLOB",graphic:"GRAPHIC",vargraphic:"VARGRAPHIC",dbclob:"DBCLOB",integer:"INTEGER",smallint:"SMALLINT",bigint:"BIGINT",decimal:"DECIMAL",float:"FLOAT",real:"REAL",double:"DOUBLE",decfloat:"DECFLOAT",date:"DATE",time:"TIME",timestamp:"TIMESTAMP",binary:"BINARY",varbinary:"VARBINARY",blob:"BLOB",boolean:"BOOLEAN",json:"JSON",array:"ARRAY",multiset:"MULTISET",xml:"XML",rowid:"ROWID"},en=[c.char,c.varchar,c.clob,c.dbclob,c.blob],tn=[c.char,c.varchar,c.nchar,c.nvarchar,c.clob,c.graphic,c.vargraphic,c.dbclob,c.binary,c.varbinary,c.blob,c.array],nn=[c.decimal,c.float,c.decfloat],rn=[c.integer,c.smallint,c.bigint,c.decimal],an=[c.char,c.varchar,c.nchar,c.nvarchar,c.clob,c.graphic,c.vargraphic,c.dbclob,c.blob];Re.exports={DATA_TYPE:c,DATA_TYPES_WITH_BYTE:en,DATA_TYPES_WITH_LENGTH:tn,DATA_TYPES_WITH_PRECISION:nn,DATA_TYPES_WITH_IDENTITY:rn,STRING_DATA_TYPES:an}});var De=l((Zr,qe)=>{"use strict";var{isNumber:O,toUpper:sn}=require("lodash"),{DATA_TYPES_WITH_BYTE:on,DATA_TYPES_WITH_LENGTH:cn,DATA_TYPES_WITH_PRECISION:mn,DATA_TYPE:j}=z(),ln=s(({type:e,length:t,lengthSemantics:a})=>` ${e}(${t} ${sn(a)})`,"addByteLength"),un=s(({type:e,length:t})=>` ${e}(${t})`,"addLength"),pn=s(({type:e,precision:t,scale:a})=>O(a)?` ${e}(${t||"*"},${a})`:O(t)?` ${e}(${t})`:` ${e}`,"addScalePrecision"),yn=s(({type:e,precision:t})=>O(t)?` ${e}(${t})`:` ${e}`,"addPrecision"),dn=s(({fractSecPrecision:e,withTimeZone:t,localTimeZone:a})=>` TIMESTAMP${O(e)?`(${e})`:""}${t?` WITH${a?" LOCAL":""} TIME ZONE`:""}`,"getTimestampType"),Tn=s(({itemsType:e})=>" MULTISET"+(e?`(${e})`:""),"getMultisetType"),An=s(({type:e})=>on.includes(e),"canHaveByte"),Oe=s(({type:e})=>cn.includes(e),"canHaveLength"),Pe=s(({type:e})=>mn.includes(e),"canHavePrecision"),gn=s(({type:e})=>e===j.decimal,"canHaveScale"),Nn=s(({type:e})=>e===j.timestamp,"isTimestamp"),In=s(({type:e})=>e===j.multiset,"isMultiset"),bn=s(({type:e,length:t,lengthSemantics:a,precision:n,scale:r,fractSecPrecision:i,withTimeZone:o,localTimeZone:m,itemsType:u,isUDTRef:p,schemaName:y})=>{let d=O(t);switch(!0){case(d&&a&&An({type:e})&&Oe({type:e})):return ln({type:e,length:t,lengthSemantics:a});case(d&&Oe({type:e})):return un({type:e,length:t});case(Pe({type:e})&&gn({type:e})):return pn({type:e,precision:n,scale:r});case(Pe({type:e})&&O(n)):return yn({type:e,precision:n});case Nn({type:e}):return dn({fractSecPrecision:i,withTimeZone:o,localTimeZone:m});case In({type:e}):return Tn({itemsType:u});case!!(p&&y):return` "${y}"."${e}"`;default:return` ${e}`}},"getColumnType");qe.exports={getColumnType:bn}});var ke=l((Jr,Be)=>{"use strict";var{toUpper:Le}=require("lodash"),{wrapInSingleQuotes:fn}=A(),{DATA_TYPES_WITH_IDENTITY:Cn,STRING_DATA_TYPES:En}=z(),Sn=s(({type:e})=>Cn.includes(Le(e)),"canHaveIdentity"),hn=s(({identity:e,type:t})=>Sn({type:t})&&!!e?.generated,"isGeneratedAsIdentity"),xn=s(({start:e,increment:t,minValue:a,maxValue:n,cycle:r})=>{let i=e?`START WITH ${e}`:"",o=t?`INCREMENT BY ${t}`:"",m=a?`MINVALUE ${a}`:"",u=n?`MAXVALUE ${n}`:"";return[i,o,r,m,u].filter(Boolean).join(", ")},"getIdentityOptions"),Kn=s(({defaultValue:e,type:t})=>En.includes(Le(t))?fn({name:e}):e,"wrapInQuotesDefaultValue"),$n=s(({default:e,identity:t,type:a})=>{if(hn({identity:t,type:a})){let r=xn(t);return` GENERATED ${t.generated} AS IDENTITY (${r})`}return e||e===0?` WITH DEFAULT ${Kn({defaultValue:e,type:a})}`:""},"getColumnDefault");Be.exports={getColumnDefault:$n}});var ee=l((jr,Ye)=>{"use strict";var{wrapInQuotes:vn}=A(),Rn=s(({constraintName:e,deferClause:t,rely:a,validate:n,indexClause:r,exceptionClause:i})=>{let o=e?` CONSTRAINT ${vn({name:e.trim()})}`:"",m=[t,a,r,n,i].filter(Boolean).map(u=>` ${u}`).join("");return{constraintString:o,statement:m}},"getOptionsString");Ye.exports={getOptionsString:Rn}});var He=l((ta,Ue)=>{"use strict";var{getOptionsString:On}=ee(),Pn=s(({primaryKey:e,unique:t,primaryKeyOptions:a,uniqueKeyOptions:n})=>e?a||{}:t?n||{}:{},"getOptions"),qn=s(({nullable:e,unique:t,primaryKey:a,primaryKeyOptions:n,uniqueKeyOptions:r})=>{let{constraintString:i,statement:o}=On(Pn({primaryKey:a,unique:t,primaryKeyOptions:n,uniqueKeyOptions:r}));return`${e?"":" NOT NULL"}${i}${a?" PRIMARY KEY":""}${t?" UNIQUE":""}${o}`},"getColumnConstraints");Ue.exports={getColumnConstraints:qn}});var _e=l((ra,Ve)=>{"use strict";var{trim:Dn}=require("lodash"),Ln=F(),{assignTemplates:Bn}=W(),{wrapInQuotes:kn,commentIfDeactivated:Yn,wrapInSingleQuotes:Un}=A(),te={column:"COLUMN",table:"TABLE",index:"INDEX"},ne=s(({objectName:e,objectType:t,description:a})=>a?Bn({template:Ln.comment,templateData:{objectType:t,objectName:Dn(e),comment:Un({name:a})}}):"","getCommentStatement"),Me=s(({tableName:e,columnName:t,description:a})=>{let n=e+"."+kn({name:t});return ne({objectName:n,objectType:te.column,description:a})},"getColumnCommentStatement"),Hn=s(({tableName:e,description:t})=>ne({objectName:e,objectType:te.table,description:t}),"getTableCommentStatement"),Mn=s(({indexName:e,description:t})=>ne({objectName:e,objectType:te.index,description:t}),"getIndexCommentStatement"),Vn=s(({tableName:e,columnDefinitions:t=[]})=>t.filter(a=>a.comment).map(a=>{let n=Me({tableName:e,columnName:a.name,description:a.comment});return Yn(n,a)}).join(`
`),"getColumnComments");Ve.exports={getColumnCommentStatement:Me,getTableCommentStatement:Hn,getColumnComments:Vn,getIndexCommentStatement:Mn}});var Ze=l((sa,Qe)=>{"use strict";var Ge=F(),{assignTemplates:Fe}=W(),{getColumnsList:_n,checkAllKeysDeactivated:Gn,commentIfDeactivated:Fn,wrapInQuotes:wn,divideIntoActivatedAndDeactivated:we}=A(),{getOptionsString:Wn}=ee(),We=s(e=>e.statement,"getKeyStatement"),Qn=s(({statements:e})=>!Array.isArray(e)||!e.length?"":e.join(`,
	`),"joinStatements"),re=s(({dividedConstraints:e,isParentActivated:t})=>{let{activatedItems:a,deactivatedItems:n}=e,r=Fn(n.join(`,
	`),{isActivated:!t,isPartOfLine:!0}),i=a.length?`,
	`+e.activatedItems.join(`,
	`):"",o=n.length?`
	`+r:"";return i+o},"generateConstraintsString"),Zn=s(({keyData:e,isParentActivated:t})=>{let a=Gn({keys:e.columns}),n=_n(e.columns,a,t),r=Wn(e).statement,i=e.constraintName?`CONSTRAINT ${wn({name:e.constraintName})} `:"";return{statement:Fe({template:Ge.createKeyConstraint,templateData:{constraintName:i,keyType:e.keyType,columns:n,options:r}}),isActivated:!a}},"createKeyConstraint"),Xn=s(({keyConstraints:e,isActivated:t})=>{let a=e.map(n=>Zn({keyData:n,isParentActivated:t}));return we({items:a,mapFunction:We})},"getDividedKeysConstraints"),Jn=s(({foreignKeyConstraints:e})=>we({items:e,mapFunction:We}),"getDividedForeignKeyConstraints"),zn=s(({columns:e,foreignKeyConstraints:t,keyConstraints:a,checkConstraints:n,isActivated:r})=>{let i=Xn({keyConstraints:a,isActivated:r}),o=Jn({foreignKeyConstraints:t}),m=re({dividedConstraints:i,isParentActivated:r}),u=re({dividedConstraints:o,isParentActivated:r}),p=re({dividedConstraints:{activatedItems:n,deactivatedItems:[]},isParentActivated:r}),y=Qn({statements:e}),d=Fe({template:Ge.createTableProps,templateData:{columns:y,foreignKeyConstraints:u,keyConstraints:m,checkConstraints:p}});return d?`
(
	${d}
)`:""},"getTableProps");Qe.exports={getTableProps:zn}});var U=l((oa,Je)=>{"use strict";var{trim:jn,identity:er}=require("lodash"),Xe=s(({prefix:e="",postfix:t="",modifier:a=er})=>n=>n?[e,a(n),t].filter(Boolean).map(jn).join(" "):"","getBasicValue"),tr=s(({configs:e,data:t})=>{let a=e.filter(({key:n})=>t[n]).map(({key:n,getValue:r})=>r(t[n],t)).filter(Boolean).join(`
	`);return Xe({prefix:" "})(a)},"getOptionsByConfigs");Je.exports={getBasicValue:Xe,getOptionsByConfigs:tr}});var et=l((ma,je)=>{"use strict";var{toUpper:nr}=require("lodash"),{wrapInQuotes:ze}=A(),{getOptionsByConfigs:rr,getBasicValue:h}=U(),ar=s(e=>{let t=[{key:"selectStatement",getValue:h({prefix:"AS"})},{key:"underSuperTable",getValue:h({prefix:"UNDER",postfix:"INHERIT SELECT PRIVILEGES",modifier:a=>ze({name:a})})},{key:"tableProperties",getValue:a=>a},{key:"table_tablespace_name",getValue:h({prefix:"IN"})},{key:"auxiliaryBaseTable",getValue:h({prefix:"STORES"})},{key:"auxiliaryAppend",getValue:h({prefix:"APPEND",modifier:nr})},{key:"auxiliaryBaseColumn",getValue:h({prefix:"COLUMN",modifier:a=>ze({name:a})})},{key:"auxiliaryPart",getValue:h({prefix:"PART"})}];return rr({configs:t,data:e})},"getTableOptions");je.exports={getTableOptions:ar}});var rt=l((ua,nt)=>{"use strict";var{wrapInQuotes:H}=A(),tt=s(({key:e})=>e?e.alias?`${H({name:e.name})} as ${H({name:e.alias})}`:H({name:e.name}):"","getKeyWithAlias"),sr=s(({keys:e})=>Array.isArray(e)?e.reduce((t,a)=>{if(!a.tableName)return t.columns.push(tt({key:a})),t;let n=`${H({name:a.dbName})}.${H({name:a.tableName})}`;return t.tables.includes(n)||t.tables.push(n),t.columns.push({statement:`${n}.${tt({key:a})}`,isActivated:a.isActivated}),t},{tables:[],columns:[]}):{tables:[],columns:[]},"getViewData");nt.exports={getViewData:sr}});var st=l((ya,at)=>{"use strict";var{wrapInQuotes:ir}=A(),{getBasicValue:or}=U(),cr=s(({index:e})=>or({prefix:" ",modifier:t=>ir({name:t})})(e.indxName),"getIndexName");at.exports={getIndexName:cr}});var ot=l((Ta,it)=>{"use strict";var{toUpper:mr}=require("lodash"),{getBasicValue:lr}=U(),ur=s(({index:e})=>lr({prefix:" ",modifier:mr})(e.indxType),"getIndexType");it.exports={getIndexType:ur}});var lt=l((ga,mt)=>{"use strict";var{toUpper:ae}=require("lodash"),{getBasicValue:M,getOptionsByConfigs:pr}=U(),{wrapInQuotes:yr}=A(),ct=s((e=[])=>e.length?`(${e.map(({name:a,type:n})=>{let r=M({prefix:" ",modifier:ae})(n);return yr({name:a})+r}).join(", ")})`:"","getIndexKeys"),dr=s((e,t)=>{if(t.indxType!=="unique")return"";let a=ct(e);return M({prefix:"INCLUDE"})(a)},"getIncludeIndexKeys"),Tr=s(({index:e})=>{let t=[{key:"indxKey",getValue:ct},{key:"indxIncludeKey",getValue:dr},{key:"indxCompress",getValue:M({prefix:"COMPRESS",modifier:ae})},{key:"indxNullKeys",getValue:M({postfix:"NULL KEYS",modifier:ae})},{key:"indxTablespace",getValue:M({prefix:"IN"})}];return pr({configs:t,data:e})},"getIndexOptions");mt.exports={getIndexOptions:Tr}});var pt=l((Ia,ut)=>{"use strict";var Ar=s(({auxiliary:e,temporary:t})=>{switch(!0){case e:return" AUXILIARY";case t:return" GLOBAL TEMPORARY";default:return""}},"getTableType");ut.exports={getTableType:Ar}});var ie=l((fa,dt)=>{"use strict";var yt=s(({item:e={}})=>e.code||e.collectionName||e.name||"","getName"),se=s(({jsonSchema:e,path:t,callback:a})=>{e.properties&&Object.entries(e.properties).forEach(([n,r])=>{let i=[...t,r.GUID];a({propertyName:n,property:r,path:i}),se({jsonSchema:r,path:i,callback:a})}),e.items&&(Array.isArray(e.items)?e.items:[e.items]).forEach((r,i)=>{let o=[...t,r.GUID];a({propertyName:i,property:r,path:o}),se({jsonSchema:r,path:o,callback:a})})},"eachProperty"),gr=s(({jsonSchema:e={}})=>{let t={};return se({jsonSchema:e,path:[],callback:s(({propertyName:n,property:r})=>{t[r.GUID]=yt({item:r})||n},"callback")}),t},"getIdToNameHashTable");dt.exports={getIdToNameHashTable:gr,getName:yt}});var At=l((Ea,Tt)=>{"use strict";var{getNamePrefixedWithSchemaName:Nr}=A(),{getName:Ir,getIdToNameHashTable:br}=ie(),fr=s(({tableData:e,detailsTab:t})=>{if(!t.auxiliary)return{};let a=e.relatedSchemas?.[t.auxiliaryBaseTable],n=a?.bucketName,r=br({jsonSchema:a}),i=Ir({item:a}),o=i&&Nr({name:i,schemaName:n}),m=r[t.auxiliaryBaseColumn?.[0]?.keyId];return{auxiliary:t.auxiliary,auxiliaryAppend:t.auxiliaryAppend,auxiliaryPart:t.auxiliaryPart,auxiliaryBaseTable:o,auxiliaryBaseColumn:m}},"hydrateAuxiliaryTableData");Tt.exports={hydrateAuxiliaryTableData:fr}});var Et=l((ha,Ct)=>{"use strict";var{toUpper:gt,isEmpty:Cr,trim:P}=require("lodash"),g=F(),Er=le(),Nt=pe(),{commentIfDeactivated:V,wrapInQuotes:_,getNamePrefixedWithSchemaName:q,checkAllKeysDeactivated:X,toArray:J,hasType:Sr,setTab:It}=A(),{assignTemplates:N}=W(),T=ve(),{getColumnType:hr}=De(),{getColumnDefault:xr}=ke(),{getColumnConstraints:Kr}=He(),{getTableCommentStatement:bt,getColumnComments:$r,getIndexCommentStatement:vr}=_e(),{getTableProps:Rr}=Ze(),{getTableOptions:ft}=et(),{getViewData:Or}=rt(),{getIndexName:Pr}=st(),{getIndexType:qr}=ot(),{getIndexOptions:Dr}=lt(),{getTableType:Lr}=pt(),{getName:Br}=ie(),{hydrateAuxiliaryTableData:kr}=At();Ct.exports=(e,t,a)=>({getDefaultType(n){return Er[n]},getTypesDescriptors(){return Nt},hasType(n){return Sr({descriptors:Nt,type:n})},hydrateSchema(n,r){return{schemaName:n.name,authorizationName:n.authorizationName,dataCapture:n.dataCapture}},createSchema({schemaName:n,ifNotExist:r,authorizationName:i,dataCapture:o}){return N({template:g.createSchema,templateData:{schemaName:_({name:n}),authorization:i?" AUTHORIZATION "+i:"",dataCapture:o?" DATA CAPTURE "+o:""}})},hydrateColumn({columnDefinition:n,jsonSchema:r,schemaData:i,definitionJsonSchema:o={}}){let m=!!r.$ref,u=m?n.type:gt(r.mode||r.type),p=gt(r.items?.mode||r.items?.type||"");return{name:n.name,type:u,ofType:r.ofType,notPersistable:r.notPersistable,size:r.size,primaryKey:T.isInlinePrimaryKey({column:r}),primaryKeyOptions:r.primaryKeyOptions,unique:T.isInlineUnique({column:r}),uniqueKeyOptions:r.uniqueKeyOptions,nullable:n.nullable,default:n.default,comment:r.refDescription||r.description||o.description,isActivated:n.isActivated,scale:n.scale,precision:n.precision,length:n.length,schemaName:i.schemaName,checkConstraints:r.checkConstraints,fractSecPrecision:r.fractSecPrecision,withTimeZone:r.withTimeZone,localTimeZone:r.localTimeZone,lengthSemantics:r.lengthSemantics,identity:r.identity,isUDTRef:m,itemsType:p}},hydrateJsonSchemaColumn(n,r){if(!n.$ref||Cr(r))return n;let{$ref:i,...o}=n;return{...r,...o}},convertColumnDefinition(n,r=g.columnDefinition){let i=N({template:r,templateData:{name:_({name:n.name}),type:hr(n),default:xr(n),constraints:Kr(n)}});return V(i,{isActivated:n.isActivated})},hydrateCheckConstraint(n){return{name:n.chkConstrName,expression:n.constrExpression,comments:n.constrComments,description:n.constrDescription}},createCheckConstraint({name:n,expression:r}){return N({template:g.checkConstraint,templateData:{name:n?`CONSTRAINT ${_({name:n})} `:"",expression:P(r).replace(/^\(([\s\S]*)\)$/,"$1")}})},createForeignKeyConstraint({name:n,foreignKey:r,primaryTable:i,primaryKey:o,primaryTableActivated:m,foreignTableActivated:u,primarySchemaName:p,customProperties:y},d,f){let x=X({keys:o}),C=X({keys:r}),I=!x&&!C&&m&&u,E=J({value:r}),b=J({value:o}),K=T.customPropertiesForForeignKey({customProperties:y}),$=q({name:i,schemaName:p||f.schemaName}),D=n?`CONSTRAINT ${_({name:n})}`:"",L=I?T.foreignKeysToString({keys:E}):T.foreignActiveKeysToString({keys:E}),S=I?T.foreignKeysToString({keys:b}):T.foreignActiveKeysToString({keys:b}),B=N({template:g.createForeignKeyConstraint,templateData:{primaryTable:$,name:D,foreignKey:L,primaryKey:S,onDelete:K}});return{statement:P(B),isActivated:I}},createForeignKey({name:n,foreignTable:r,foreignKey:i,primaryTable:o,primaryKey:m,primaryTableActivated:u,foreignTableActivated:p,foreignSchemaName:y,primarySchemaName:d,customProperties:f},x,C){let I=X({keys:m}),E=X({keys:i}),b=!I&&!E&&u&&p,K=J({value:i}),$=J({value:m}),D=T.customPropertiesForForeignKey({customProperties:f}),L=q({name:o,schemaName:d||C.schemaName}),S=q({name:r,schemaName:y||C.schemaName}),B=n?_({name:n}):"",G=b?T.foreignKeysToString({keys:K}):T.foreignActiveKeysToString({keys:K}),v=b?T.foreignKeysToString({keys:$}):T.foreignActiveKeysToString({keys:$}),R=N({template:g.createForeignKey,templateData:{primaryTable:L,foreignTable:S,name:B,foreignKey:G,primaryKey:v,onDelete:D}});return{statement:P(R)+`
`,isActivated:b}},hydrateTable({tableData:n,entityData:r,jsonSchema:i}){let o=r[0],m=o.underSuperTable?.[0]?.parentTable,u=n.relatedSchemas?.[m],p=Br({item:u}),y=kr({tableData:n,detailsTab:o});return{...n,...y,keyConstraints:T.getTableKeyConstraints({jsonSchema:i}),selectStatement:P(o.selectStatement),temporary:o.temporary,description:o.description,ifNotExist:o.ifNotExist,tableProperties:o.tableProperties,table_tablespace_name:o.table_tablespace_name,underSuperTable:p}},createTable({checkConstraints:n,columnDefinitions:r,columns:i,foreignKeyConstraints:o,keyConstraints:m,name:u,schemaData:p,selectStatement:y,temporary:d,auxiliary:f,auxiliaryBaseTable:x,auxiliaryBaseColumn:C,auxiliaryAppend:I,auxiliaryPart:E,table_tablespace_name:b,underSuperTable:K,description:$,ifNotExist:D,tableProperties:L},S){let B=D?" IF NOT EXISTS":"",G=Lr({auxiliary:f,temporary:d}),v=q({name:u,schemaName:p.schemaName}),R=bt({tableName:v,description:$});if(f){let $t=ft({table_tablespace_name:b,auxiliaryBaseTable:x,auxiliaryBaseColumn:C,auxiliaryAppend:I,auxiliaryPart:E}),vt=N({template:g.createAuxiliaryTable,templateData:{name:v,tableType:G,tableOptions:$t}}),Rt=R?`
`+R+`
`:`
`;return V(vt+Rt,{isActivated:S})}let St=Rr({columns:i,foreignKeyConstraints:o,keyConstraints:m,checkConstraints:n,isActivated:S}),ht=ft({selectStatement:y,tableProperties:L,table_tablespace_name:b,underSuperTable:K}),oe=$r({tableName:v,columnDefinitions:r}),xt=R||oe?`
`+R+oe:`
`,Kt=N({template:g.createTable,templateData:{name:v,ifNotExists:B,tableProps:St,tableType:G,tableOptions:ht}});return V(Kt+xt,{isActivated:S})},hydrateIndex(n,r,i){return{...n,schemaName:i.schemaName}},createIndex(n,r){let i=Pr({index:r}),o=qr({index:r}),m=Dr({index:r}),u=q({name:n,schemaName:r.schemaName}),p=N({template:g.createIndex,templateData:{indexType:o,indexName:i,indexOptions:m,indexTableName:u}}),y=vr({indexName:i,description:r.indxDescription}),d=p+y;return V(d,{isActivated:r.isActivated})},hydrateViewColumn(n){return{name:n.name,tableName:n.entityName,alias:n.alias,isActivated:n.isActivated,dbName:n.dbName}},hydrateView({viewData:n,entityData:r}){let i=r[0];return{name:n.name,keys:n.keys,orReplace:i.or_replace,selectStatement:i.selectStatement,tableName:n.tableName,schemaName:n.schemaData.schemaName,description:i.description,rootTableAlias:i.rootTableAlias,tableTagsClause:i.tableTagsClause,viewProperties:i.viewProperties}},createView(n,r,i){let o=q({name:n.name,schemaName:n.schemaName}),m=n.orReplace?" OR REPLACE":"",{columns:u,tables:p}=Or({keys:n.keys}),y=u.map(E=>E.statement).join(`,
		`),d=bt({tableName:o,description:n.description}),f=d?`
`+d+`
`:`
`,x=n.viewProperties?` 
`+It({text:n.viewProperties}):"",C=P(n.selectStatement)?P(It({text:n.selectStatement})):N({template:g.viewSelectStatement,templateData:{tableName:p.join(", "),keys:y}}),I=N({template:g.createView,templateData:{name:o,orReplace:m,viewProperties:x,selectStatement:C}});return V(I+f,{isActivated:i})},commentIfDeactivated(n,r,i){return n}})});module.exports=Et();

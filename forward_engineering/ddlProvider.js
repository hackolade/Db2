"use strict";var Lt=Object.defineProperty;var s=(e,t)=>Lt(e,"name",{value:t,configurable:!0});var l=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var w=l((zr,le)=>{"use strict";le.exports={createSchema:"CREATE SCHEMA ${schemaName}${authorization}${dataCapture};",createTable:"CREATE${tableType} TABLE${ifNotExists} ${name}${tableProps}${tableOptions};",createAuxiliaryTable:"CREATE${tableType} TABLE ${name}${tableOptions};",comment:"\nCOMMENT ON ${objectType} ${objectName} IS ${comment};\n",createTableProps:"${columns}${keyConstraints}${checkConstraints}${foreignKeyConstraints}",columnDefinition:"${name}${type}${default}${constraints}",createForeignKey:"ALTER TABLE ${foreignTable} ADD CONSTRAINT ${name} FOREIGN KEY (${foreignKey}) REFERENCES ${primaryTable} (${primaryKey})${onDelete};",createForeignKeyConstraint:"${name} FOREIGN KEY (${foreignKey}) REFERENCES ${primaryTable} (${primaryKey})${onDelete}",checkConstraint:"${name}CHECK (${expression})",createKeyConstraint:"${constraintName}${keyType}${columns}${options}",createView:"CREATE${orReplace} VIEW ${name} ${viewProperties}\n	AS ${selectStatement};",viewSelectStatement:"SELECT ${keys}\n	FROM ${tableName}",createIndex:"CREATE${indexType} INDEX${indexName} ON ${indexTableName}${indexOptions};\n"}});var pe=l((ea,ue)=>{"use strict";ue.exports={number:"NUMBER",string:"VARCHAR",date:"DATE",timestamp:"TIMESTAMP",binary:"BINARY",boolean:"BOOLEAN",document:"JSONB",array:"ARRAY",objectId:"VARCHAR(24)",default:"CHAR"}});var de=l((ta,ye)=>{"use strict";ye.exports={SMALLINT:{capacity:2},INT:{capacity:4},INTEGER:{capacity:4},BIGINT:{capacity:8},DECIMAL:{mode:"decimal"},DEC:{mode:"decimal"},NUMERIC:{mode:"decimal"},FLOAT:{capacity:4,mode:"float"},"DOUBLE PRECISION":{capacity:8,mode:"float"},REAL:{capacity:8,mode:"float"},NUMBER:{mode:"number"},CHAR:{mode:"char"},CHARACTER:{mode:"char"},VARCHAR:{mode:"varchar"},"CHAR VARYING":{mode:"varchar"},"CHARACTER VARYING":{mode:"varchar"},"LONG VARCHAR":{mode:"long varchar"},GRAPHIC:{mode:"graphic"},VARGRAPHIC:{mode:"vargraphic"},CLOB:{mode:"clob"},"CHARACTER LARGE OBJECT":{mode:"clob"},BINARY:{mode:"binary"},VARVIBINARY:{mode:"varbinary"},BLOB:{mode:"blob"},DATE:{format:"YYYY-MM-DD"},TIME:{format:"hh:mm:ss"},TIMESTAMP:{format:"YYYY-MM-DD hh:mm:ss"},JSON:{},XML:{}}});var F=l((na,Te)=>{"use strict";var Bt={missingJavaPath:"Path to JAVA binary file is incorrect. Please specify JAVA_HOME variable in your system or put specific path to JAVA binary file in connection settings."},kt={table:"TABLE",view:"VIEW"},Mt="--";Te.exports={ERROR_MESSAGE:Bt,TABLE_TYPE:kt,INLINE_COMMENT:Mt}});var A=l((ra,Ie)=>{"use strict";var{toLower:Ae}=require("lodash"),{INLINE_COMMENT:Yt}=F(),Ht=s(({text:e,tab:t="	"})=>e.split(`
`).map(a=>t+a).join(`
`),"setTab"),Ut=s(({descriptors:e,type:t})=>Object.keys(e).map(Ae).includes(Ae(t)),"hasType"),W=s(({key:e})=>e?.isActivated??!0,"checkIsKeyActivated"),Vt=s(({keys:e})=>e.length?e.every(t=>!W({key:t})):!1,"checkAllKeysDeactivated"),ge=s(({items:e,mapFunction:t})=>{let a=e.filter(r=>W({key:r})).map(t),n=e.filter(r=>!W({key:r})).map(t);return{activatedItems:a,deactivatedItems:n}},"divideIntoActivatedAndDeactivated"),Ne=s((e,{isActivated:t,isPartOfLine:a,inlineComment:n=Yt})=>t!==!1?e:a?"/* "+e+" */":e.includes(`
`)?`/*
`+e+` */
`:n+" "+e,"commentIfDeactivated"),M=s(({name:e})=>`"${e}"`,"wrapInQuotes"),_t=s(({name:e})=>`'${e}'`,"wrapInSingleQuotes"),Gt=s(({name:e,schemaName:t})=>t?`${M({name:t})}.${M({name:e})}`:M({name:e}),"getNamePrefixedWithSchemaName"),wt=s(({name:e})=>M({name:e}),"columnMapToString"),Ft=s((e,t,a,n=wt)=>{let r=ge({items:e,mapFunction:n}),i=r?.deactivatedItems?.length?Ne(r.deactivatedItems.join(", "),{isActivated:!1,isPartOfLine:!0}):"";return!t&&a?" ("+r.activatedItems.join(", ")+i+")":" ("+e.map(n).join(", ")+")"},"getColumnsList"),Wt=s(({value:e})=>Array.isArray(e)?e:[e],"toArray");Ie.exports={setTab:Ht,hasType:Ut,checkAllKeysDeactivated:Vt,checkIsKeyActivated:W,divideIntoActivatedAndDeactivated:ge,commentIfDeactivated:Ne,wrapInQuotes:M,wrapInSingleQuotes:_t,getNamePrefixedWithSchemaName:Gt,getColumnsList:Ft,toArray:Wt}});var Q=l((sa,fe)=>{"use strict";var be=s((e="")=>new RegExp("\\$\\{(.*?)\\}",e),"template"),Qt=s(e=>e.match(be("gi"))||[],"getAllTemplates"),Jt=s(e=>(e.match(be("i"))||[])[1],"parseTemplate"),Zt=s(({template:e,templateData:t})=>Qt(e).reduce((a,n)=>{let r=Jt(n);return a.replace(n,()=>t[r]||t[r]===0?t[r]:"")},e),"assignTemplates");fe.exports={assignTemplates:Zt}});var Pe=l((oa,Oe)=>{"use strict";var{omitBy:Xt,isNil:jt,isEmpty:he,trim:Y}=require("lodash"),{wrapInQuotes:Ee,commentIfDeactivated:zt,checkIsKeyActivated:Ce}=A(),J={primaryKey:"PRIMARY KEY",unique:"UNIQUE"},Se=s((e,t)=>Object.entries(e.properties).map(t),"mapProperties"),ve=s(({column:e})=>!e.compositeUniqueKey&&e.unique,"isUniqueKey"),xe=s(({column:e})=>ve({column:e})&&!Y(e.uniqueKeyOptions?.constraintName),"isInlineUnique"),Ke=s(({column:e})=>!e.compositeUniqueKey&&!e.compositePrimaryKey&&e.primaryKey,"isPrimaryKey"),$e=s(({column:e})=>Ke({column:e})&&!Y(e.primaryKeyOptions?.constraintName),"isInlinePrimaryKey"),Z=s(({columnName:e,isActivated:t,options:a,keyType:n})=>({keyType:n,columns:[{name:e,isActivated:t}],...Xt(a,jt)}),"hydrateKeyOptions"),en=s(({keyId:e,properties:t})=>Object.keys(t).find(a=>t[a].GUID===e),"findName"),tn=s(({keyId:e,properties:t})=>Object.values(t).find(n=>n.GUID===e)?.isActivated??!0,"checkIfActivated"),Re=s(({jsonSchema:e,keys:t=[]})=>t.map(a=>{let n=en({keyId:a.keyId,properties:e.properties}),r=tn({keyId:a.keyId,properties:e.properties});return{name:n,isActivated:r}}),"getKeys"),nn=s(({jsonSchema:e})=>Array.isArray(e.primaryKey)?e.primaryKey.filter(t=>!he(t.compositePrimaryKey)).map(t=>({...Z({options:t,keyType:J.primaryKey}),columns:Re({keys:t.compositePrimaryKey,jsonSchema:e})})):[],"getCompositePrimaryKeys"),rn=s(({jsonSchema:e})=>Array.isArray(e.uniqueKey)?e.uniqueKey.filter(t=>!he(t.compositeUniqueKey)).map(t=>({...Z({options:t,keyType:J.unique}),columns:Re({keys:t.compositeUniqueKey,jsonSchema:e})})):[],"getCompositeUniqueKeys"),an=s(({jsonSchema:e})=>{if(!e.properties)return[];let t=Se(e,([n,r])=>{if(!(!ve({column:r})||xe({column:r})))return Z({columnName:n,isActivated:r.isActivated,options:r.uniqueKeyOptions,keyType:J.unique})}).filter(Boolean);return[...Se(e,([n,r])=>{if(!(!Ke({column:r})||$e({column:r})))return Z({columnName:n,isActivated:r.isActivated,options:r.primaryKeyOptions,keyType:J.primaryKey})}).filter(Boolean),...nn({jsonSchema:e}),...t,...rn({jsonSchema:e})]},"getTableKeyConstraints"),sn=s(({keys:e})=>{if(Array.isArray(e)){let t=e.filter(r=>Ce({key:r})).map(r=>Ee({name:Y(r.name)})),a=e.filter(r=>!Ce({key:r})).map(r=>Ee({name:Y(r.name)})),n=a.length?zt(a,{isActivated:!1,isPartOfLine:!0}):"";return t.join(", ")+n}return e},"foreignKeysToString"),on=s(({keys:e})=>e.map(t=>Y(t.name)).join(", "),"foreignActiveKeysToString"),cn=s(({customProperties:e={}})=>{let{relationshipOnDelete:t,relationshipOnUpdate:a}=e,n=t?" ON DELETE "+t:"",r=a?" ON UPDATE "+a:"";return n+r},"customPropertiesForForeignKey");Oe.exports={getTableKeyConstraints:an,isInlineUnique:xe,isInlinePrimaryKey:$e,foreignKeysToString:sn,foreignActiveKeysToString:on,customPropertiesForForeignKey:cn}});var z=l((ma,qe)=>{"use strict";var c={char:"CHAR",varchar:"VARCHAR",nchar:"NCHAR",nvarchar:"NVARCHAR",clob:"CLOB",graphic:"GRAPHIC",vargraphic:"VARGRAPHIC",dbclob:"DBCLOB",integer:"INTEGER",smallint:"SMALLINT",bigint:"BIGINT",decimal:"DECIMAL",float:"FLOAT",real:"REAL",double:"DOUBLE",decfloat:"DECFLOAT",date:"DATE",time:"TIME",timestamp:"TIMESTAMP",binary:"BINARY",varbinary:"VARBINARY",blob:"BLOB",boolean:"BOOLEAN",json:"JSON",array:"ARRAY",multiset:"MULTISET",xml:"XML",rowid:"ROWID"},mn=[c.char,c.varchar,c.clob,c.dbclob,c.blob],ln=[c.char,c.varchar,c.nchar,c.nvarchar,c.clob,c.graphic,c.vargraphic,c.dbclob,c.binary,c.varbinary,c.blob,c.array],un=[c.decimal,c.float,c.decfloat],pn=[c.integer,c.smallint,c.bigint,c.decimal],yn=[c.char,c.varchar,c.nchar,c.nvarchar,c.clob,c.graphic,c.vargraphic,c.dbclob,c.blob];qe.exports={DATA_TYPE:c,DATA_TYPES_WITH_BYTE:mn,DATA_TYPES_WITH_LENGTH:ln,DATA_TYPES_WITH_PRECISION:un,DATA_TYPES_WITH_IDENTITY:pn,STRING_DATA_TYPES:yn}});var ke=l((la,Be)=>{"use strict";var{isNumber:O,toUpper:dn}=require("lodash"),{DATA_TYPES_WITH_BYTE:Tn,DATA_TYPES_WITH_LENGTH:An,DATA_TYPES_WITH_PRECISION:gn,DATA_TYPE:ee}=z(),Nn=s(({type:e,length:t,lengthSemantics:a})=>` ${e}(${t} ${dn(a)})`,"addByteLength"),In=s(({type:e,length:t})=>` ${e}(${t})`,"addLength"),bn=s(({type:e,precision:t,scale:a})=>O(a)?` ${e}(${t||"*"},${a})`:O(t)?` ${e}(${t})`:` ${e}`,"addScalePrecision"),fn=s(({type:e,precision:t})=>O(t)?` ${e}(${t})`:` ${e}`,"addPrecision"),En=s(({fractSecPrecision:e,withTimeZone:t,localTimeZone:a})=>` TIMESTAMP${O(e)?`(${e})`:""}${t?` WITH${a?" LOCAL":""} TIME ZONE`:""}`,"getTimestampType"),Cn=s(({itemsType:e})=>" MULTISET"+(e?`(${e})`:""),"getMultisetType"),Sn=s(({type:e})=>Tn.includes(e),"canHaveByte"),De=s(({type:e})=>An.includes(e),"canHaveLength"),Le=s(({type:e})=>gn.includes(e),"canHavePrecision"),hn=s(({type:e})=>e===ee.decimal,"canHaveScale"),vn=s(({type:e})=>e===ee.timestamp,"isTimestamp"),xn=s(({type:e})=>e===ee.multiset,"isMultiset"),Kn=s(({type:e,length:t,lengthSemantics:a,precision:n,scale:r,fractSecPrecision:i,withTimeZone:o,localTimeZone:m,itemsType:u,isUDTRef:p,schemaName:y})=>{let d=O(t);switch(!0){case(d&&a&&Sn({type:e})&&De({type:e})):return Nn({type:e,length:t,lengthSemantics:a});case(d&&De({type:e})):return In({type:e,length:t});case(Le({type:e})&&hn({type:e})):return bn({type:e,precision:n,scale:r});case(Le({type:e})&&O(n)):return fn({type:e,precision:n});case vn({type:e}):return En({fractSecPrecision:i,withTimeZone:o,localTimeZone:m});case xn({type:e}):return Cn({itemsType:u});case!!(p&&y):return` "${y}"."${e}"`;default:return` ${e}`}},"getColumnType");Be.exports={getColumnType:Kn}});var He=l((pa,Ye)=>{"use strict";var{toUpper:Me}=require("lodash"),{wrapInSingleQuotes:$n}=A(),{DATA_TYPES_WITH_IDENTITY:Rn,STRING_DATA_TYPES:On}=z(),Pn=s(({type:e})=>Rn.includes(Me(e)),"canHaveIdentity"),qn=s(({identity:e,type:t})=>Pn({type:t})&&!!e?.generated,"isGeneratedAsIdentity"),Dn=s(({start:e,increment:t,minValue:a,maxValue:n,cycle:r})=>{let i=e?`START WITH ${e}`:"",o=t?`INCREMENT BY ${t}`:"",m=a?`MINVALUE ${a}`:"",u=n?`MAXVALUE ${n}`:"";return[i,o,r,m,u].filter(Boolean).join(", ")},"getIdentityOptions"),Ln=s(({defaultValue:e,type:t})=>On.includes(Me(t))?$n({name:e}):e,"wrapInQuotesDefaultValue"),Bn=s(({default:e,identity:t,type:a})=>{if(qn({identity:t,type:a})){let r=Dn(t);return` GENERATED ${t.generated} AS IDENTITY (${r})`}return e||e===0?` WITH DEFAULT ${Ln({defaultValue:e,type:a})}`:""},"getColumnDefault");Ye.exports={getColumnDefault:Bn}});var te=l((da,Ue)=>{"use strict";var{wrapInQuotes:kn}=A(),Mn=s(({constraintName:e,deferClause:t,rely:a,validate:n,indexClause:r,exceptionClause:i})=>{let o=e?` CONSTRAINT ${kn({name:e.trim()})}`:"",m=[t,a,r,n,i].filter(Boolean).map(u=>` ${u}`).join("");return{constraintString:o,statement:m}},"getOptionsString");Ue.exports={getOptionsString:Mn}});var _e=l((Aa,Ve)=>{"use strict";var{getOptionsString:Yn}=te(),Hn=s(({primaryKey:e,unique:t,primaryKeyOptions:a,uniqueKeyOptions:n})=>e?a||{}:t?n||{}:{},"getOptions"),Un=s(({nullable:e,unique:t,primaryKey:a,primaryKeyOptions:n,uniqueKeyOptions:r})=>{let{constraintString:i,statement:o}=Yn(Hn({primaryKey:a,unique:t,primaryKeyOptions:n,uniqueKeyOptions:r}));return`${e?"":" NOT NULL"}${i}${a?" PRIMARY KEY":""}${t?" UNIQUE":""}${o}`},"getColumnConstraints");Ve.exports={getColumnConstraints:Un}});var Fe=l((Na,we)=>{"use strict";var{trim:Vn}=require("lodash"),_n=w(),{assignTemplates:Gn}=Q(),{wrapInQuotes:wn,commentIfDeactivated:Fn,wrapInSingleQuotes:Wn}=A(),ne={column:"COLUMN",table:"TABLE",index:"INDEX"},Qn=s(e=>e.replace(/'/g,"''"),"escapeSpecialCharacters"),re=s(({objectName:e,objectType:t,description:a})=>a?Gn({template:_n.comment,templateData:{objectType:t,objectName:Vn(e),comment:Wn({name:Qn(a)})}}):"","getCommentStatement"),Ge=s(({tableName:e,columnName:t,description:a})=>{let n=e+"."+wn({name:t});return re({objectName:n,objectType:ne.column,description:a})},"getColumnCommentStatement"),Jn=s(({tableName:e,description:t})=>re({objectName:e,objectType:ne.table,description:t}),"getTableCommentStatement"),Zn=s(({indexName:e,description:t})=>re({objectName:e,objectType:ne.index,description:t}),"getIndexCommentStatement"),Xn=s(({tableName:e,columnDefinitions:t=[]})=>t.filter(a=>a.comment).map(a=>{let n=Ge({tableName:e,columnName:a.name,description:a.comment});return Fn(n,a)}).join(`
`),"getColumnComments");we.exports={getColumnCommentStatement:Ge,getTableCommentStatement:Jn,getColumnComments:Xn,getIndexCommentStatement:Zn}});var ae=l((ba,We)=>{"use strict";var{INLINE_COMMENT:jn}=F(),zn=s(({index:e,numberOfStatements:t,lastIndexOfActivatedStatement:a,delimiter:n})=>{let r=e===t-1,i=e===a;return r?"":i?" --"+n:n},"getDelimiter"),er=s(({statements:e,delimiter:t=",",indent:a=`
`})=>{let n=e.findLastIndex(i=>!i.startsWith(jn)),r=e.length;return e.map((i,o)=>{let m=zn({index:o,numberOfStatements:r,lastIndexOfActivatedStatement:n,delimiter:t});return i+m}).join(a)},"joinActivatedAndDeactivatedStatements");We.exports={joinActivatedAndDeactivatedStatements:er}});var ze=l((Ca,je)=>{"use strict";var Qe=w(),{assignTemplates:Je}=Q(),{getColumnsList:tr,checkAllKeysDeactivated:nr,commentIfDeactivated:rr,wrapInQuotes:ar,divideIntoActivatedAndDeactivated:Ze}=A(),{getOptionsString:sr}=te(),{joinActivatedAndDeactivatedStatements:ir}=ae(),{INLINE_COMMENT:Ea}=F(),Xe=s(e=>e.statement,"getKeyStatement"),se=s(({dividedConstraints:e,isParentActivated:t})=>{let{activatedItems:a,deactivatedItems:n}=e,r=rr(n.join(`,
	`),{isActivated:!t,isPartOfLine:!0}),i=a.length?`,
	`+e.activatedItems.join(`,
	`):"",o=n.length?`
	`+r:"";return i+o},"generateConstraintsString"),or=s(({keyData:e,isParentActivated:t})=>{let a=nr({keys:e.columns}),n=tr(e.columns,a,t),r=sr(e).statement,i=e.constraintName?`CONSTRAINT ${ar({name:e.constraintName})} `:"";return{statement:Je({template:Qe.createKeyConstraint,templateData:{constraintName:i,keyType:e.keyType,columns:n,options:r}}),isActivated:!a}},"createKeyConstraint"),cr=s(({keyConstraints:e,isActivated:t})=>{let a=e.map(n=>or({keyData:n,isParentActivated:t}));return Ze({items:a,mapFunction:Xe})},"getDividedKeysConstraints"),mr=s(({foreignKeyConstraints:e})=>Ze({items:e,mapFunction:Xe}),"getDividedForeignKeyConstraints"),lr=s(({columns:e,foreignKeyConstraints:t,keyConstraints:a,checkConstraints:n,isActivated:r})=>{let i=cr({keyConstraints:a,isActivated:r}),o=mr({foreignKeyConstraints:t}),m=se({dividedConstraints:i,isParentActivated:r}),u=se({dividedConstraints:o,isParentActivated:r}),p=se({dividedConstraints:{activatedItems:n,deactivatedItems:[]},isParentActivated:r}),y=ir({statements:e,indent:`
	`}),d=Je({template:Qe.createTableProps,templateData:{columns:y,foreignKeyConstraints:u,keyConstraints:m,checkConstraints:p}});return d?`
(
	${d}
)`:""},"getTableProps");je.exports={getTableProps:lr}});var H=l((ha,tt)=>{"use strict";var{trim:ur,identity:pr}=require("lodash"),et=s(({prefix:e="",postfix:t="",modifier:a=pr})=>n=>n?[e,a(n),t].filter(Boolean).map(ur).join(" "):"","getBasicValue"),yr=s(({configs:e,data:t})=>{let a=e.filter(({key:n})=>t[n]).map(({key:n,getValue:r})=>r(t[n],t)).filter(Boolean).join(`
	`);return et({prefix:" "})(a)},"getOptionsByConfigs");tt.exports={getBasicValue:et,getOptionsByConfigs:yr}});var at=l((xa,rt)=>{"use strict";var{toUpper:dr}=require("lodash"),{wrapInQuotes:nt}=A(),{getOptionsByConfigs:Tr,getBasicValue:S}=H(),Ar=s(e=>{let t=[{key:"selectStatement",getValue:S({prefix:"AS"})},{key:"underSuperTable",getValue:S({prefix:"UNDER",postfix:"INHERIT SELECT PRIVILEGES",modifier:a=>nt({name:a})})},{key:"tableProperties",getValue:a=>a},{key:"table_tablespace_name",getValue:S({prefix:"IN"})},{key:"auxiliaryBaseTable",getValue:S({prefix:"STORES"})},{key:"auxiliaryAppend",getValue:S({prefix:"APPEND",modifier:dr})},{key:"auxiliaryBaseColumn",getValue:S({prefix:"COLUMN",modifier:a=>nt({name:a})})},{key:"auxiliaryPart",getValue:S({prefix:"PART"})}];return Tr({configs:t,data:e})},"getTableOptions");rt.exports={getTableOptions:Ar}});var ot=l(($a,it)=>{"use strict";var{wrapInQuotes:U}=A(),st=s(({key:e})=>e?e.alias?`${U({name:e.name})} as ${U({name:e.alias})}`:U({name:e.name}):"","getKeyWithAlias"),gr=s(({keys:e})=>Array.isArray(e)?e.reduce((t,a)=>{if(!a.tableName)return t.columns.push(st({key:a})),t;let n=`${U({name:a.dbName})}.${U({name:a.tableName})}`;return t.tables.includes(n)||t.tables.push(n),t.columns.push({statement:`${n}.${st({key:a})}`,isActivated:a.isActivated}),t},{tables:[],columns:[]}):{tables:[],columns:[]},"getViewData");it.exports={getViewData:gr}});var mt=l((Oa,ct)=>{"use strict";var{wrapInQuotes:Nr}=A(),{getBasicValue:Ir}=H(),br=s(({index:e})=>Ir({prefix:" ",modifier:t=>Nr({name:t})})(e.indxName),"getIndexName");ct.exports={getIndexName:br}});var ut=l((qa,lt)=>{"use strict";var{toUpper:fr}=require("lodash"),{getBasicValue:Er}=H(),Cr=s(({index:e})=>Er({prefix:" ",modifier:fr})(e.indxType),"getIndexType");lt.exports={getIndexType:Cr}});var dt=l((La,yt)=>{"use strict";var{toUpper:ie}=require("lodash"),{getBasicValue:V,getOptionsByConfigs:Sr}=H(),{wrapInQuotes:hr}=A(),pt=s((e=[])=>e.length?`(${e.map(({name:a,type:n})=>{let r=V({prefix:" ",modifier:ie})(n);return hr({name:a})+r}).join(", ")})`:"","getIndexKeys"),vr=s((e,t)=>{if(t.indxType!=="unique")return"";let a=pt(e);return V({prefix:"INCLUDE"})(a)},"getIncludeIndexKeys"),xr=s(({index:e})=>{let t=[{key:"indxKey",getValue:pt},{key:"indxIncludeKey",getValue:vr},{key:"indxCompress",getValue:V({prefix:"COMPRESS",modifier:ie})},{key:"indxNullKeys",getValue:V({postfix:"NULL KEYS",modifier:ie})},{key:"indxTablespace",getValue:V({prefix:"IN"})}];return Sr({configs:t,data:e})},"getIndexOptions");yt.exports={getIndexOptions:xr}});var At=l((ka,Tt)=>{"use strict";var Kr=s(({auxiliary:e,temporary:t})=>{switch(!0){case e:return" AUXILIARY";case t:return" GLOBAL TEMPORARY";default:return""}},"getTableType");Tt.exports={getTableType:Kr}});var ce=l((Ya,Nt)=>{"use strict";var gt=s(({item:e={}})=>e.code||e.collectionName||e.name||"","getName"),oe=s(({jsonSchema:e,path:t,callback:a})=>{e.properties&&Object.entries(e.properties).forEach(([n,r])=>{let i=[...t,r.GUID];a({propertyName:n,property:r,path:i}),oe({jsonSchema:r,path:i,callback:a})}),e.items&&(Array.isArray(e.items)?e.items:[e.items]).forEach((r,i)=>{let o=[...t,r.GUID];a({propertyName:i,property:r,path:o}),oe({jsonSchema:r,path:o,callback:a})})},"eachProperty"),$r=s(({jsonSchema:e={}})=>{let t={};return oe({jsonSchema:e,path:[],callback:s(({propertyName:n,property:r})=>{t[r.GUID]=gt({item:r})||n},"callback")}),t},"getIdToNameHashTable");Nt.exports={getIdToNameHashTable:$r,getName:gt}});var bt=l((Ua,It)=>{"use strict";var{getNamePrefixedWithSchemaName:Rr}=A(),{getName:Or,getIdToNameHashTable:Pr}=ce(),qr=s(({tableData:e,detailsTab:t})=>{if(!t.auxiliary)return{};let a=e.relatedSchemas?.[t.auxiliaryBaseTable],n=a?.bucketName,r=Pr({jsonSchema:a}),i=Or({item:a}),o=i&&Rr({name:i,schemaName:n}),m=r[t.auxiliaryBaseColumn?.[0]?.keyId];return{auxiliary:t.auxiliary,auxiliaryAppend:t.auxiliaryAppend,auxiliaryPart:t.auxiliaryPart,auxiliaryBaseTable:o,auxiliaryBaseColumn:m}},"hydrateAuxiliaryTableData");It.exports={hydrateAuxiliaryTableData:qr}});var xt=l((_a,vt)=>{"use strict";var{toUpper:ft,isEmpty:Dr,trim:P}=require("lodash"),g=w(),Lr=pe(),Et=de(),{commentIfDeactivated:D,wrapInQuotes:_,getNamePrefixedWithSchemaName:q,checkAllKeysDeactivated:X,toArray:j,hasType:Br,setTab:Ct}=A(),{assignTemplates:N}=Q(),T=Pe(),{getColumnType:kr}=ke(),{getColumnDefault:Mr}=He(),{getColumnConstraints:Yr}=_e(),{getTableCommentStatement:St,getColumnComments:Hr,getIndexCommentStatement:Ur}=Fe(),{getTableProps:Vr}=ze(),{getTableOptions:ht}=at(),{getViewData:_r}=ot(),{getIndexName:Gr}=mt(),{getIndexType:wr}=ut(),{getIndexOptions:Fr}=dt(),{getTableType:Wr}=At(),{getName:Qr}=ce(),{hydrateAuxiliaryTableData:Jr}=bt(),{joinActivatedAndDeactivatedStatements:Zr}=ae(),Xr=s(({columns:e})=>{let t=`
		`,a=e.map(({statement:n,isActivated:r})=>D(n,{isActivated:r,isPartOfLine:!1}));return t+Zr({statements:a,delimiter:",",indent:t})},"getViewColumnsAsString");vt.exports=(e,t,a)=>({getDefaultType(n){return Lr[n]},getTypesDescriptors(){return Et},hasType(n){return Br({descriptors:Et,type:n})},hydrateSchema(n,r){return{schemaName:n.name,authorizationName:n.authorizationName,dataCapture:n.dataCapture}},createSchema({schemaName:n,ifNotExist:r,authorizationName:i,dataCapture:o}){return N({template:g.createSchema,templateData:{schemaName:_({name:n}),authorization:i?" AUTHORIZATION "+i:"",dataCapture:o?" DATA CAPTURE "+o:""}})},hydrateColumn({columnDefinition:n,jsonSchema:r,schemaData:i,definitionJsonSchema:o={}}){let m=!!r.$ref,u=m?n.type:ft(r.mode||r.type),p=ft(r.items?.mode||r.items?.type||"");return{name:n.name,type:u,ofType:r.ofType,notPersistable:r.notPersistable,size:r.size,primaryKey:T.isInlinePrimaryKey({column:r}),primaryKeyOptions:r.primaryKeyOptions,unique:T.isInlineUnique({column:r}),uniqueKeyOptions:r.uniqueKeyOptions,nullable:n.nullable,default:n.default,comment:r.refDescription||r.description||o.description,isActivated:n.isActivated,scale:n.scale,precision:n.precision,length:n.length,schemaName:i.schemaName,checkConstraints:r.checkConstraints,fractSecPrecision:r.fractSecPrecision,withTimeZone:r.withTimeZone,localTimeZone:r.localTimeZone,lengthSemantics:r.lengthSemantics,identity:r.identity,isUDTRef:m,itemsType:p}},hydrateJsonSchemaColumn(n,r){if(!n.$ref||Dr(r))return n;let{$ref:i,...o}=n;return{...r,...o}},convertColumnDefinition(n,r=g.columnDefinition){let i=N({template:r,templateData:{name:_({name:n.name}),type:kr(n),default:Mr(n),constraints:Yr(n)}});return D(i,{isActivated:n.isActivated})},hydrateCheckConstraint(n){return{name:n.chkConstrName,expression:n.constrExpression,comments:n.constrComments,description:n.constrDescription}},createCheckConstraint({name:n,expression:r}){return N({template:g.checkConstraint,templateData:{name:n?`CONSTRAINT ${_({name:n})} `:"",expression:P(r).replace(/^\(([\s\S]*)\)$/,"$1")}})},createForeignKeyConstraint({name:n,foreignKey:r,primaryTable:i,primaryKey:o,primaryTableActivated:m,foreignTableActivated:u,primarySchemaName:p,customProperties:y},d,f){let h=X({keys:o}),E=X({keys:r}),I=!h&&!E&&m&&u,v=j({value:r}),b=j({value:o}),x=T.customPropertiesForForeignKey({customProperties:y}),K=q({name:i,schemaName:p||f.schemaName}),L=n?`CONSTRAINT ${_({name:n})}`:"",B=I?T.foreignKeysToString({keys:v}):T.foreignActiveKeysToString({keys:v}),C=I?T.foreignKeysToString({keys:b}):T.foreignActiveKeysToString({keys:b}),k=N({template:g.createForeignKeyConstraint,templateData:{primaryTable:K,name:L,foreignKey:B,primaryKey:C,onDelete:x}});return{statement:P(k),isActivated:I}},createForeignKey({name:n,foreignTable:r,foreignKey:i,primaryTable:o,primaryKey:m,primaryTableActivated:u,foreignTableActivated:p,foreignSchemaName:y,primarySchemaName:d,customProperties:f},h,E){let I=X({keys:m}),v=X({keys:i}),b=!I&&!v&&u&&p,x=j({value:i}),K=j({value:m}),L=T.customPropertiesForForeignKey({customProperties:f}),B=q({name:o,schemaName:d||E.schemaName}),C=q({name:r,schemaName:y||E.schemaName}),k=n?_({name:n}):"",G=b?T.foreignKeysToString({keys:x}):T.foreignActiveKeysToString({keys:x}),$=b?T.foreignKeysToString({keys:K}):T.foreignActiveKeysToString({keys:K}),R=N({template:g.createForeignKey,templateData:{primaryTable:B,foreignTable:C,name:k,foreignKey:G,primaryKey:$,onDelete:L}});return{statement:P(R)+`
`,isActivated:b}},hydrateTable({tableData:n,entityData:r,jsonSchema:i}){let o=r[0],m=o.underSuperTable?.[0]?.parentTable,u=n.relatedSchemas?.[m],p=Qr({item:u}),y=Jr({tableData:n,detailsTab:o});return{...n,...y,keyConstraints:T.getTableKeyConstraints({jsonSchema:i}),selectStatement:P(o.selectStatement),temporary:o.temporary,description:o.description,ifNotExist:o.ifNotExist,tableProperties:o.tableProperties,table_tablespace_name:o.table_tablespace_name,underSuperTable:p}},createTable({checkConstraints:n,columnDefinitions:r,columns:i,foreignKeyConstraints:o,keyConstraints:m,name:u,schemaData:p,selectStatement:y,temporary:d,auxiliary:f,auxiliaryBaseTable:h,auxiliaryBaseColumn:E,auxiliaryAppend:I,auxiliaryPart:v,table_tablespace_name:b,underSuperTable:x,description:K,ifNotExist:L,tableProperties:B},C){let k=L?" IF NOT EXISTS":"",G=Wr({auxiliary:f,temporary:d}),$=q({name:u,schemaName:p.schemaName}),R=St({tableName:$,description:K});if(f){let Pt=ht({table_tablespace_name:b,auxiliaryBaseTable:h,auxiliaryBaseColumn:E,auxiliaryAppend:I,auxiliaryPart:v}),qt=N({template:g.createAuxiliaryTable,templateData:{name:$,tableType:G,tableOptions:Pt}}),Dt=R?`
`+R+`
`:`
`;return D(qt+Dt,{isActivated:C})}let Kt=Vr({columns:i,foreignKeyConstraints:o,keyConstraints:m,checkConstraints:n,isActivated:C}),$t=ht({selectStatement:y,tableProperties:B,table_tablespace_name:b,underSuperTable:x}),me=Hr({tableName:$,columnDefinitions:r}),Rt=R||me?`
`+R+me:`
`,Ot=N({template:g.createTable,templateData:{name:$,ifNotExists:k,tableProps:Kt,tableType:G,tableOptions:$t}});return D(Ot+Rt,{isActivated:C})},hydrateIndex(n,r,i){return{...n,schemaName:i.schemaName}},createIndex(n,r){let i=Gr({index:r}),o=wr({index:r}),m=Fr({index:r}),u=q({name:n,schemaName:r.schemaName}),p=N({template:g.createIndex,templateData:{indexType:o,indexName:i,indexOptions:m,indexTableName:u}}),y=Ur({indexName:i,description:r.indxDescription}),d=p+y;return D(d,{isActivated:r.isActivated})},hydrateViewColumn(n){return{name:n.name,tableName:n.entityName,alias:n.alias,isActivated:n.isActivated,dbName:n.dbName}},hydrateView({viewData:n,entityData:r}){let i=r[0];return{name:n.name,keys:n.keys,orReplace:i.or_replace,selectStatement:i.selectStatement,tableName:n.tableName,schemaName:n.schemaData.schemaName,description:i.description,rootTableAlias:i.rootTableAlias,tableTagsClause:i.tableTagsClause,viewProperties:i.viewProperties}},createView(n,r,i){let o=q({name:n.name,schemaName:n.schemaName}),m=n.orReplace?" OR REPLACE":"",{columns:u,tables:p}=_r({keys:n.keys}),y=Xr({columns:u}),d=St({tableName:o,description:n.description}),f=d?`
`+d+`
`:`
`,h=n.viewProperties?` 
`+Ct({text:n.viewProperties}):"",E=P(n.selectStatement)?P(Ct({text:n.selectStatement})):N({template:g.viewSelectStatement,templateData:{tableName:p.join(", "),keys:y}}),I=N({template:g.createView,templateData:{name:o,orReplace:m,viewProperties:h,selectStatement:E}});return D(I+f,{isActivated:i})},commentIfDeactivated(n,r,i){return n}})});module.exports=xt();
